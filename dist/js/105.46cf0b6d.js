"use strict";(self["webpackChunkassignment_2_1"]=self["webpackChunkassignment_2_1"]||[]).push([[105],{9105:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-container"},[t("h1",[e._v("Search Recipes")]),t("b-form",{on:{submit:function(t){return t.preventDefault(),e.performSearch.apply(null,arguments)}}},[t("SearchBar",{on:{mounted:e.focusSearchInput}}),t("div",{staticClass:"filter-container mt-4"},[t("b-form-group",{attrs:{label:"Cuisine"}},[t("b-form-select",{attrs:{options:e.cuisines},on:{change:e.performSearch},model:{value:e.selectedCuisine,callback:function(t){e.selectedCuisine=t},expression:"selectedCuisine"}})],1),t("b-form-group",{attrs:{label:"Diet"}},[t("b-form-select",{attrs:{options:e.diets},on:{change:e.performSearch},model:{value:e.selectedDiet,callback:function(t){e.selectedDiet=t},expression:"selectedDiet"}})],1),t("b-form-group",{attrs:{label:"Intolerance"}},[t("b-form-select",{attrs:{options:e.intolerances},on:{change:e.performSearch},model:{value:e.selectedIntolerance,callback:function(t){e.selectedIntolerance=t},expression:"selectedIntolerance"}})],1),t("b-form-group",{attrs:{label:"Results Per Page"}},[t("b-form-select",{staticClass:"w-100",attrs:{options:e.resultsOptions},on:{change:e.performSearch},model:{value:e.resultsPerPage,callback:function(t){e.resultsPerPage=t},expression:"resultsPerPage"}})],1),e.recipes.length>1?t("b-button-group",{staticClass:"ml-auto my-auto"},[t("b-button",{staticClass:"p-2",attrs:{variant:"title"===e.lastSort?"primary":"outline-primary"},on:{click:function(t){return e.sortResults("title")}}},[e._v("Sort by title")]),t("b-button",{attrs:{variant:"readyInMinutes"===e.lastSort?"primary":"outline-primary"},on:{click:function(t){return e.sortResults("readyInMinutes")}}},[e._v(" Sort by Time ")]),t("b-button",{attrs:{variant:"aggregateLikes"===e.lastSort?"primary":"outline-primary"},on:{click:function(t){return e.sortResults("aggregateLikes")}}},[e._v(" Sort by Popularity ")])],1):e._e()],1)],1),e.recipes.length>1?t("div",[t("b-pagination",{staticClass:"mt-3",attrs:{"total-rows":e.totalRecipes,"per-page":e.resultsPerPage,"first-number":"","last-number":"",align:"center"},on:{input:e.performSearch},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),t("div",{staticClass:"recipe-list"},[t("RecipePreviewList",{attrs:{title:"Search Results",recipes:e.recipes,perRow:3}}),t("b-pagination",{staticClass:"mx-auto mt-3",attrs:{"total-rows":e.totalRecipes,"per-page":e.resultsPerPage,"first-number":"","last-number":"",align:"center"},on:{input:e.performSearch},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1):e.searchPerformed&&0==e.recipes.length?t("div",[t("p",[e._v("No recipes found matching your criteria.")])]):e._e()],1)},a=[],i=s(4048),c=s(388),n=(s(6910),s(7495),s(5746),s(2090)),l=s(2184),o=s(4962);const u={name:"SearchPage",components:{RecipePreviewList:n.A,SearchBar:l.A},data:function(){return{searchQuery:"",selectedCuisine:"",selectedDiet:"",selectedIntolerance:"",resultsPerPage:5,recipes:[],totalRecipes:0,searchPerformed:!1,cuisines:["No Filter","Italian","Mexican","Chinese"],diets:["No Filter","Vegetarian","Vegan","Paleo"],intolerances:["No Filter","Dairy","Gluten","Peanut"],resultsOptions:[5,10,15],lastSearch:this.$root.store.lastSearch,page:1,sortDesc:!1,lastSort:""}},methods:{focusSearchInput:function(e){e.focus()},performSearch:function(){var e=this;return(0,c.A)((0,i.A)().mark((function t(){var s,r,a;return(0,i.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Performing search..."),s=e.searchQuery||e.$route.query.search,r={diet:"No Filter"!==e.selectedDiet&&""!==e.selectedDiet?e.selectedDiet:"",cuisines:"No Filter"!==e.selectedCuisine&&""!==e.selectedCuisine?e.selectedCuisine:"",intolerances:"No Filter"!==e.selectedIntolerance&&""!==e.selectedIntolerance?e.selectedIntolerance:""},t.next=5,(0,o.qq)(s,e.page,e.resultsPerPage,r);case 5:a=t.sent,console.log("Search response:",a),e.recipes=a.data.recipes,e.totalRecipes=a.data.total,e.searchPerformed=!0,e.$root.store.lastSearch={searchQuery:e.searchQuery,selectedCuisine:e.selectedCuisine,selectedDiet:e.selectedDiet,selectedIntolerance:e.selectedIntolerance,resultsPerPage:e.resultsPerPage,recipes:e.recipes};case 11:case"end":return t.stop()}}),t)})))()},sortResults:function(e){var t=1;e===this.lastSort?(this.sortDesc=!this.sortDesc,t=this.sortDesc?-1:1):(this.sortDesc=!1,this.lastSort=e),this.recipes.sort((function(s,r){return s[e]<r[e]?-1*t:s[e]>r[e]?1*t:0}))}},created:function(){if(this.$root.store.lastSearch){var e=this.$root.store.lastSearch;this.searchQuery=e.searchQuery,this.selectedCuisine=e.selectedCuisine,this.selectedDiet=e.selectedDiet,this.selectedIntolerance=e.selectedIntolerance,this.resultsPerPage=e.resultsPerPage,this.recipes=e.recipes,this.totalRecipes=e.totalRecipes||this.recipes.length}else this.searchQuery&&this.performSearch()},mounted:function(){this.$route.query.search&&(this.searchQuery=this.$route.query.search,this.selectedCuisine="",this.selectedDiet="",this.selectedIntolerance="",this.resultsPerPage=5,this.performSearch())},watch:{"$route.query.search":function(e){this.searchQuery=e,this.performSearch()},recipes:function(e){this.$root.store.lastSearch={searchQuery:this.searchQuery,selectedCuisine:this.selectedCuisine,selectedDiet:this.selectedDiet,selectedIntolerance:this.selectedIntolerance,resultsPerPage:this.resultsPerPage,recipes:e,totalRecipes:this.totalRecipes}}}},h=u;var p=s(1656),d=(0,p.A)(h,r,a,!1,null,"d8031b8c",null);const f=d.exports}}]);
//# sourceMappingURL=105.46cf0b6d.js.map